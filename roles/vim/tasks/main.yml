- name: Git clone/pull {{ git_staticcolorscheme }}
  ansible.builtin.git:
    repo: "{{ git_staticcolorscheme }}"
    dest: "{{ path_home }}/Projects/Static-Color-Scheme"

- name: Create directories under {{ path_home }}/.vim
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: 0700
  loop:
    - "{{ path_home }}/.vim"
    - "{{ path_home }}/.vim/backup"
    - "{{ path_home }}/.vim/swap"
    - "{{ path_home }}/.vim/undo"
    - "{{ path_home }}/.vim/pack/ggustafsson/start"
    - "{{ path_home }}/.vim/pack/others/start"

- name: Create symbolic links to Dot-Files, Vim colorscheme, etc
  ansible.builtin.file:
    src: "{{ path_projects }}/{{ item.src }}"
    dest: "{{ item.dest }}"
    state: link
  loop:
    - src: "{{ path_projects }}/Dot-Files/vimrc"
      dest: "{{ path_home }}/.vimrc"
    - src: "{{ path_projects }}/Dot-Files/vim/after"
      dest: "{{ path_home }}/.vim/after"
    - src: "{{ path_projects }}/Dot-Files/vim/templates"
      dest: "{{ path_home }}/.vim/templates"
    - src: "{{ path_projects }}/Static-Color-Scheme"
      dest: "{{ path_home }}/.vim/pack/ggustafsson/start/Static-Color-Scheme"
    - src: "{{ path_home }}/.local/share/fzf"
      dest: "{{ path_home }}/.vim/pack/others/start/fzf"

# TODO: Install vim-go another way since git repo is dev repo.
- name: Git clone/pull misc Vim plugins
  ansible.builtin.git:
    repo: "{{ item.url }}"
    dest: "{{ path_home }}/.vim/pack/others/start/{{ item.name }}"
  loop:
    - name: ansible-vim
      url: https://github.com/pearofducks/ansible-vim.git
    - name: fzf.vim
      url: https://github.com/junegunn/fzf.vim.git
    - name: syntastic
      url: https://github.com/vim-syntastic/syntastic.git
    - name: vim-go
      url: https://github.com/fatih/vim-go.git
    - name: vim-mundo
      url: https://github.com/simnalamburt/vim-mundo.git

    - name: fern.vim
      url: https://github.com/lambdalisue/fern.vim.git
    - name: fern-hijack.vim
      url: https://github.com/lambdalisue/fern-hijack.vim.git
    - name: fern-git-status.vim
      url: https://github.com/lambdalisue/fern-git-status.vim.git

    - name: vim-commentary
      url: https://github.com/tpope/vim-commentary.git
    - name: vim-endwise
      url: https://github.com/tpope/vim-endwise.git
    - name: vim-repeat
      url: https://github.com/tpope/vim-repeat.git
    - name: vim-speeddating
      url: https://github.com/tpope/vim-speeddating.git
    - name: vim-surround
      url: https://github.com/tpope/vim-surround.git

- name: Genereate help tags for all Vim plugins
  ansible.builtin.command: vim -c 'helptags ALL' -c q
  changed_when: false
